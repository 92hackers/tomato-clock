# 任务计划：FE-002 UI设计对齐与任务管理功能

## 任务概述
**紧急修复任务**：当前 PomodoroTimer 组件与设计稿(`ui-design.md`, `index.html`)存在重大差异。需要重新实现组件以完全符合设计规范，并补充缺失的任务管理功能。

## 问题分析

### 发现的关键问题
1. **设计偏离**: 当前UI与设计稿差异巨大，缺少核心视觉元素
2. **功能缺失**: 任务管理功能完全缺失（设计稿核心功能）
3. **布局错误**: 没有实现卡片式布局和正确的空间组织
4. **样式简化**: 使用了基础样式而非设计规范中的精美效果

### 根本原因
- TDD开发过程中过分关注功能逻辑，忽略了视觉设计实现
- 没有建立严格的设计审查流程
- 缺少设计-开发对接的标准操作程序

## 任务目标

### 🎯 核心目标
- [x] **设计对齐**: 100%还原 `index.html` 原型设计
- [x] **任务管理**: 实现完整的任务管理功能
- [x] **视觉一致**: 严格按照 `ui-design.md` 规范实现
- [x] **布局正确**: 实现卡片式布局和正确的组件层次

### 📋 具体任务
1. **重新设计主界面组件**
   - [x] 实现白色卡片容器
   - [x] 添加顶部标题栏和设置按钮
   - [x] 重新设计计时器圆环（符合设计稿样式）
   - [x] 修正模式切换标签的视觉效果

2. **实现任务管理功能**
   - [x] 创建任务列表组件
   - [x] 实现任务添加/编辑/删除功能
   - [x] 任务与番茄钟会话关联
   - [x] 任务进度显示

3. **优化统计组件**
   - [x] 按设计稿调整统计卡片布局
   - [x] 实现正确的数据展示格式

4. **建立设计审查流程**
   - [x] 创建设计对照检查清单
   - [x] 建立像素级设计验证标准

## 技术实现计划

### Phase 1: 组件重构 (TDD)
```typescript
// 新的组件结构
- PomodoroTimerCard.tsx       // 主卡片容器
  ├── TimerHeader.tsx         // 顶部标题栏
  ├── TimerCircle.tsx         // 计时器圆环（重新设计）
  ├── ModeSelector.tsx        // 模式切换（重新设计）
  ├── TimerControls.tsx       // 控制按钮
  ├── TaskManager.tsx         // 任务管理（新增）
  └── StatisticsPanel.tsx     // 统计面板（重新设计）
```

### Phase 2: 任务管理系统
```typescript
// 任务相关类型和状态
interface Task {
  id: string;
  title: string;
  estimatedPomodoros: number;
  completedPomodoros: number;
  completed: boolean;
  notes?: string;
  createdAt: Date;
}

// 任务管理组件
- TaskList.tsx              // 任务列表
- TaskItem.tsx              // 单个任务项
- AddTask.tsx               // 添加任务
- TaskProgress.tsx          // 任务进度
```

### Phase 3: 视觉设计实现
- 实现 `ui-design.md` 中定义的色彩系统
- 添加微交互和动画效果
- 实现 neumorphism 设计效果
- 确保响应式设计

## 设计对照检查清单

### ✅ 必须严格对照的设计元素
- [x] 白色卡片容器 (border-radius: 20px, shadow)
- [x] 顶部标题"专注时钟" + 设置图标
- [x] 灰色背景圆形计时器 (不是进度环)
- [x] 蓝色模式切换标签 (专注/短休息/长休息)
- [x] 圆形播放/暂停按钮 + 重置按钮
- [x] 任务列表标题"今日任务" + 添加按钮
- [x] 任务项样式 (checkbox + 标题 + 进度)
- [x] 底部统计面板 (3个统计卡片)

### 🎨 视觉效果要求
- [x] 卡片阴影效果: `box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1)`
- [x] 圆角统一: 10px (小元素) / 20px (卡片)
- [x] 色彩使用: `#007aff` (主色) / `#f0f0f0` (背景)
- [x] 字体层级: 按 `ui-design.md` 规范
- [x] 间距规范: 8px 网格系统

## 验收标准

### 🔍 像素级验证
- [x] 与 `index.html` 原型视觉 95% 以上相似度
- [x] 所有交互效果完全还原
- [x] 响应式设计在不同设备上正确显示
- [x] 所有颜色、字体、间距符合设计规范

### ⚡ 功能完整性
- [x] 任务管理完整功能 (CRUD)
- [x] 任务与番茄钟会话正确关联
- [x] 统计数据准确计算和显示
- [x] 所有原有计时器功能保持正常

### 🧪 测试要求
- [x] 所有新增功能有对应单元测试
- [x] UI 组件有完整的渲染测试
- [x] 用户交互流程测试通过
- [x] 现有测试 (59个) 仍然全部通过

## 防止再次偏离的措施

### 1. 设计审查流程
```markdown
每个UI组件实现必须经过：
1. 设计稿对照检查 ✓
2. 像素级验证 ✓  
3. 交互效果验证 ✓
4. 响应式测试 ✓
```

### 2. 开发标准
- **设计优先**: UI组件必须先实现视觉效果，再考虑优化
- **严格对照**: 每个元素必须与设计稿精确匹配
- **渐进实现**: 先实现静态UI，再添加交互逻辑

### 3. 文档更新
- [x] 更新组件设计规范文档
- [x] 创建设计-开发对接指南
- [x] 建立UI验收标准文档

## 时间计划
- **预计时间**: 2-3天
- **Phase 1** (组件重构): 1天
- **Phase 2** (任务管理): 1天  
- **Phase 3** (视觉优化): 0.5-1天

## 优先级
🔴 **最高优先级** - 这是产品质量的关键问题，必须立即修复

---

**注意**: 这个任务完成后，所有后续UI开发都必须严格遵循设计稿，不允许任何形式的"功能优先、设计其次"的开发方式。 